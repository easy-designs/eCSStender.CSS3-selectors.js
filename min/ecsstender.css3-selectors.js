/*------------------------------------------------------------------------------
Function:       eCSStender.css3-selectors.js
Author:         Aaron Gustafson (aaron at easy-designs dot net)
Creation Date:  2009-09-17
Version:        0.2
Homepage:       http://github.com/easy-designs/eCSStender.css3-selectors.js
License:        MIT License 
Note:           If you change or improve on this script, please let us know by
                emailing the author (above) with a link to your demo page.
------------------------------------------------------------------------------*/
(function(z){if(typeof z=="undefined"){return}var h=z.methods.findBySelector,f=z.isSupported,c=z.embedCSS,y=z.applyWeightedStyle,a=function(e,D,C){var E=B,F;for(F in D){if(z.isInheritedProperty(D,F)){continue}E+=F+m+D[F]+v}if(E!=B){c(e+j+E+s,C)}},g=function(C,G,D,F){if(A(D)){return}try{var H=h(C),E=H.length;while(E--){y(H[E],G,F)}}catch(I){}},A=function(e){return e!="screen"},o=function(e){return e.replace(t,"$1$2$3$4$5")},u="net.easy-designs.",l="selector",n="properties",k="specificity",q="*",B="",j="{",s="}",i="(",r=")",m=":",v=";",w="-",x=".",d="Your chosen selector library does not support this selector: ",t=/(.*\()\s*(?:(\d+n?|odd|even)\s*(\+|-)?\s*(\d+)?)\s*(\).*)/g,p=document.createElement("div"),b=document.createElement("p");if(!(h instanceof Function)){}z.register({fingerprint:u+"compound-class-selector",selector:/(?:\.\S+){2,}/,test:function(){var C=p.cloneNode(true),e=b.cloneNode(true);e.className="foo";C.appendChild(e);return(f(l,"div p.bar.foo",C,e))}},q,function(E,H,J,C){var I=/((?:\.\S+){2,})/,D=E.replace(I,"$1"),e,G,F;D=D.split(".");D.shift();e=D.pop();G=z.lookup({selector:new RegExp("\\."+e),specificity:C,media:J},q);for(F=0;F<G.length;F++){g(G[F][l],G[F][n],J,G[F][k])}});(function(){var C=["div p[title]",'div p[title="a b-c"]',"div p[title*=a]","div p[title~=a]","div p[title^=a]","div p[title$=c]","div p[title|=c]"],e=C.length,E=p.cloneNode(true),D=b.cloneNode(true);D.setAttribute("title","a b-c");E.appendChild(D);while(e--){(function(F){z.register({fingerprint:u+"attribute-selector-"+e,selector:/\[.*\]/,test:function(){return !f(l,F,E,D)}},q,g)})(C[e])}})();z.register({fingerprint:u+"nth-child",selector:/:nth-child\(\s*(?:even|odd|[+-]?\d+|[+-]?\d*?n(?:\s*[+-]\s*\d*)?)\s*\)/,test:function(){var C=p.cloneNode(true),e=b.cloneNode(true);C.appendChild(e);return(!f(l,"div p:nth-child( 2n + 1 )",C,e))}},q,function(e,F,C,E){e=o(e);var D="p:nth-child(2n+1)",I=p.cloneNode(true),H=b.cloneNode(true),G=g;I.appendChild(H);if((f(l,"p:nth-child(odd)",I,H)&&!f(l,D,I,H)&&e.match(/:nth-child\(\s*(?:even|odd)\s*\)/)!=null)||f(l,D,I,H)){G=a}G(e,F,C,E);return G});z.register({fingerprint:u+"nth-last-child",selector:/:nth-last-child\(\s*(?:even|odd|[+-]?\d*?|[+-]?\d*?n(?:\s*[+-]\s*\d*?)?)\s*\)/,test:function(){var C=p.cloneNode(true),e=b.cloneNode(true);C.appendChild(e);return(!f(l,"div p:nth-last-child( 2n + 1 )",C,e))}},q,function(e,F,C,E){e=o(e);var D="p:nth-last-child(2n+1)",I=p.cloneNode(true),H=b.cloneNode(true),G=g;I.appendChild(H);if((f(l,"p:nth-last-child(odd)",I,H)&&!f(l,D,I,H)&&e.match(/:nth-last-child\(\s*(?:even|odd)\s*\)/)!=null)||f(l,D,I,H)){G=a}G(e,F,C,E);return G});z.register({selector:/:nth-(?:last-)?of-type\(\s*(?:even|odd|[+-]?\d*?|[+-]?\d*?n(?:\s*[+-]\s*\d*?)?)\s*\)/,test:function(){var C=p.cloneNode(true),e=b.cloneNode(true);C.appendChild(e);return(!f(l,"div p:nth-of-type( 2n + 1 )",C,e))}},q,g);(function(){var C={"div :first-child":/:first-child/,"div :last-child":/:last-child/,"div :only-child":/:only-child/},e,E=p.cloneNode(true),D=b.cloneNode(true);E.appendChild(D);for(e in C){(function(F,G){z.register({fingerprint:u+G.toString().replace(/[\/:]/g,""),selector:G,test:function(){return !f(l,F,E,D)}},q,g)})(e,C[e])}})();(function(){var e={"div p:first-of-type":/:first-of-type/,"div p:last-of-type":/:last-of-type/,"div div:only-of-type":/:only-of-type/},F=p.cloneNode(true),C=p.cloneNode(true),E=b.cloneNode(true),D=b.cloneNode(true);F.appendChild(E);F.appendChild(D);F.appendChild(C);for(selector in e){(function(G,H){z.register({fingerprint:u+H.toString().replace(/[\/:]/g,""),selector:H,test:function(){return !f(l,G,F,E)}},q,g)})(selector,e[selector])}})();eCSStender.register({selector:/:empty/,test:function(){var C=p.cloneNode(true),e=b.cloneNode(true);C.appendChild(e);return(!f(l,"div p:empty",C,e))}},q,g);z.register({selector:/:lang\(.*\)/,test:function(){var C=p.cloneNode(true),e=b.cloneNode(true);e.setAttribute("lang","en");C.appendChild(e);return(!f("selector","div p:lang(en)",C,e))}},q,function(C,F,D,E){var H=g,G;try{G=h(C)}catch(I){H=function(e,L,J,K){e=e.replace(/:lang\(([^)]*)\)/,"[lang=$1]");g(e,L,J,K)}}H(C,F,D,E);return H});eCSStender.register({selector:/:(?:(?:en|dis)abled|checked)/,test:function(){var F=p.cloneNode(true),e,E,D,C;F.innerHTML='<input type="text" /><input type="text" disabled="disabled" /><input type="checkbox" checked="checked" />';e=F.getElementsByTagName("input");E=e[0];D=e[1];C=e[2];return(!f(l,"div :enabled",F,E)||!f(l,"div :disabled",F,D)||!f(l,"div :checked",F,C))}},q,g);z.register({selector:/:not\([^)]*\)/,test:function(){var D=p.cloneNode(true),C=b.cloneNode(true),e=b.cloneNode(true);C.setAttribute("id","no");D.appendChild(C);D.appendChild(e);return(!f(l,"div p:not(#no)",D,e))}},q,g);z.register({selector:function(){return(this.match(/\+/)&&!this.match(/:nth-(?:last-)?(?:child|of-type)\(\s*(?:even|odd|[+-]?\d*?|[+-]?\d*?n(?:\s*[+-]\s*\d*?)?)\s*\)/))},test:function(){var D=p.cloneNode(true),C=b.cloneNode(true),e=b.cloneNode(true);D.appendChild(C);D.appendChild(e);return(!f(l,"div p + p",D,e))}},q,g);z.register({selector:/~[^=]/,test:function(){var E=p.cloneNode(true),D=b.cloneNode(true),C=b.cloneNode(true),e=b.cloneNode(true);E.appendChild(D);E.appendChild(C);E.appendChild(e);return(!f(l,"div p ~ p",E,e))}},q,g)})(eCSStender);